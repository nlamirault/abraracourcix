machine:
  pre:
    - curl -o go.tar.gz -sL https://golang.org/dl/go1.8.3.linux-amd64.tar.gz
    - sudo rm -rf /usr/local/go
    - sudo tar -C /usr/local -xzf go.tar.gz
    - sudo chmod a+w /usr/local/go/src/
  services:
    - docker

dependencies:
  post:
    - go version

test:
  pre:
    - echo `pwd`
    - echo $GOPATH
    - mkdir -p /home/ubuntu/.go_workspace/src/github.com/nlamirault/
    - cd /home/ubuntu/.go_workspace/src/github.com/nlamirault/ && ln -s /home/ubuntu/abraracourcix .
    - cd /home/ubuntu/.go_workspace/src/github.com/nlamirault/abraracourcix
  override:
    - make tools
    - make build
    # - make test
    - make lint
    - make vet
    - make coverage
